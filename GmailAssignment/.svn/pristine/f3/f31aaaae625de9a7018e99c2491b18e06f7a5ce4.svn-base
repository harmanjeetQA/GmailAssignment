package utilities;

import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;

import org.apache.pdfbox.pdfparser.PDFParser;
import org.apache.pdfbox.util.PDFTextStripper;

public class PDFReader {
	public String readLatestPDFFromFolder(String dirPath) throws IOException {
		File getLatestFile = new Utility().getLatestFileFromDir(dirPath);
		String fileName = getLatestFile.getName();
		if (!(fileName.contains(".pdf"))) {
			return null;
		}else {
			InputStream is = new FileInputStream(getLatestFile);
			PDFParser parser = new PDFParser(is);
			parser.parse();
			String pdfText = new PDFTextStripper().getText(parser.getPDDocument());
			parser.getPDDocument().close();
			return pdfText;
		}		
	}

	public String readPDFFromPath(String filePath) throws IOException {
		File pdfFile = new File(filePath);
		InputStream is = new FileInputStream(pdfFile);
		PDFParser parser = new PDFParser(is);
		parser.parse();
		String pdfText = new PDFTextStripper().getText(parser.getPDDocument());
		parser.getPDDocument().close();
		return pdfText;
	}


}
